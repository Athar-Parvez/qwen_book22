# Data Model: Physical AI & Humanoid Robotics Textbook

## Overview
This document defines the data entities and their relationships for the Physical AI & Humanoid Robotics textbook project. The model is designed to support textbook content delivery, student interactions, and the RAG-based chatbot functionality.

## Entities

### Textbook Chapter
- **Description**: A major section of the textbook containing educational content
- **Fields**:
  - `id`: String/UUID (Primary Key)
  - `title`: String (e.g., "Introduction to Physical AI", "The Robotic Nervous System")
  - `content`: Text (Markdown format)
  - `order`: Integer (sequence in the textbook)
  - `learning_objectives`: Array of strings
  - `prerequisites`: Array of strings
  - `created_at`: DateTime
  - `updated_at`: DateTime
  - `is_published`: Boolean

### Textbook Section
- **Description**: A subsection within a chapter that focuses on specific concepts or topics
- **Fields**:
  - `id`: String/UUID (Primary Key)
  - `chapter_id`: String/UUID (Foreign Key to Textbook Chapter)
  - `title`: String
  - `content`: Text (Markdown format)
  - `order`: Integer (sequence within chapter)
  - `created_at`: DateTime
  - `updated_at`: DateTime
  - `is_published`: Boolean

### Code Example
- **Description**: A snippet of code included in textbook content to demonstrate implementation concepts
- **Fields**:
  - `id`: String/UUID (Primary Key)
  - `section_id`: String/UUID (Foreign Key to Textbook Section)
  - `code`: Text (code content)
  - `language`: String (e.g., Python, C++, etc.)
  - `description`: Text (explanation of the code)
  - `created_at`: DateTime

### Diagram/Visual
- **Description**: A visual representation that helps explain concepts in the textbook
- **Fields**:
  - `id`: String/UUID (Primary Key)
  - `section_id`: String/UUID (Foreign Key to Textbook Section)
  - `title`: String
  - `file_path`: String (path to image file)
  - `alt_text`: String (accessibility description)
  - `caption`: Text
  - `created_at`: DateTime

### User Question
- **Description**: A query submitted by a student to the question system for clarification
- **Fields**:
  - `id`: String/UUID (Primary Key)
  - `student_id`: String/UUID (identifier if tracked)
  - `question_text`: Text
  - `context_selection`: Text (specific text the student was asking about)
  - `asked_at`: DateTime
  - `processed_by_rag`: Boolean
  - `chapter_id`: String/UUID (Foreign Key, optional)

### System Response
- **Description**: The answer generated by the system based on textbook content
- **Fields**:
  - `id`: String/UUID (Primary Key)
  - `question_id`: String/UUID (Foreign Key to User Question)
  - `response_text`: Text
  - `source_chapters`: Array of String/UUID (chapters used to generate response)
  - `confidence_score`: Float (0-1 scale)
  - `generated_at`: DateTime
  - `feedback_score`: Integer (optional, if students rate responses)

### Content Metadata
- **Description**: Information about textbook content for the RAG system
- **Fields**:
  - `id`: String/UUID (Primary Key)
  - `content_id`: String/UUID (ID of associated content - chapter, section, etc.)
  - `content_type`: String (chapter, section, code_example, etc.)
  - `vector_embedding`: Array of Float (embedding vector for similarity search)
  - `text_preview`: Text (text that was embedded)
  - `created_at`: DateTime
  - `updated_at`: DateTime

## Relationships
- Textbook Chapter 1-to-many Textbook Section
- Textbook Section 1-to-many Code Example
- Textbook Section 1-to-many Diagram/Visual
- User Question 1-to-1 System Response
- Content Metadata points to chapters/sections for RAG lookup

## Validation Rules
- Textbook Chapter.title is required and must be unique within the textbook
- Textbook Section.chapter_id is required and must reference an existing chapter
- User Question.question_text is required and must be between 5-1000 characters
- Content Metadata.vector_embedding must not be empty

## State Transitions
- Textbook Chapter/Section: draft → review → published → archived
- User Question: submitted → processing → answered → resolved